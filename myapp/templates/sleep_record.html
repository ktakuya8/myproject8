<!DOCTYPE html>
<html lang="ja">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <title>睡眠記録</title>
    <link rel="stylesheet" href="{% static 'styles.css' %}">
</head>
<body>
    <h1>睡眠記録</h1>
    <form method="post" action="{% url 'myapp:submit_sleep_record' %}">
        {% csrf_token %}
        <label for="duration">睡眠時間（時間）:</label>
        <input type="range" id="duration" name="duration" min="0" max="12" value="8">
        <span id="durationDisplay">8時間</span>
        <div id="warning" style="color: red;"></div>

        <label for="date">日付:</label>
        <input type="date" id="date" name="date" value="{{ yesterday }}">

        <button type="submit">保存</button>
    </form>

    <div id="records">
        {% for record in sleep_records %}
        <div>
            <p>{{ record.date }}: 睡眠時間 {{ record.duration }}時間</p>
        </div>
        {% endfor %}
    </div>
    <a href="{% url 'myapp:main_menu' %}">メインメニューに戻る</a>

    <script>
        const durationInput = document.getElementById('duration');
        const durationDisplay = document.getElementById('durationDisplay');
        const warningDiv = document.getElementById('warning');

        durationInput.oninput = function() {
            const durationValue = parseInt(this.value);
            durationDisplay.textContent = durationValue + '時間';

            
            if (durationValue < 6 || durationValue > 10) {
                warningDiv.textContent = '推奨睡眠時間（8時間）から大きく外れています！';
            } else {
                warningDiv.textContent = '';
            }
        };
    </script>
</body>
</html>
